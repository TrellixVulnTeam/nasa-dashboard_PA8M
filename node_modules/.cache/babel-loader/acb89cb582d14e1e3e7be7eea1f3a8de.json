{"ast":null,"code":"import axios from 'axios';\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  return Promise.reject(error);\n});\nconst state = {\n  user: null,\n  fullUser: null,\n  token: null,\n  tokenNotValid: false,\n  projects: null,\n  project: null\n};\nconst getters = {\n  isAuthenticated: state => !!state.user,\n  StateUser: state => state.user,\n  StateFullUser: state => state.fullUser,\n  StateToken: state => state.token,\n  StateTokenNotValid: state => state.tokenNotValid\n};\nconst actions = {\n  async Register({\n    dispatch\n  }, form) {\n    await axios.post('register', form);\n    await dispatch('LogIn', form);\n  },\n\n  async LogIn({\n    commit\n  }, user) {\n    const res = await axios.post('login', user);\n    if (res.status === 404) throw Error;\n    await commit('setUser', user.username);\n    await commit('setToken', res.data.JWT);\n    await commit('setTokenValid');\n  },\n\n  async LogOut({\n    commit\n  }) {\n    let user = null;\n    commit('logOut', user);\n  },\n\n  async GetUser({\n    commit\n  }, username) {\n    let response = await axios.get(`user/${username}`);\n    commit('setFullUser', response.data);\n  },\n\n  async UpdateUser({\n    dispatch\n  }, user) {\n    let res = await axios.put(`user/${user.username}`, user);\n    if (res.status === 404) throw Error;\n    await dispatch('setFullUser', res.data);\n  },\n\n  async DeleteUser({\n    commit,\n    state\n  }, userid) {\n    await axios.delete(`user/${userid}`, {\n      headers: {\n        token: state.token\n      }\n    });\n    await commit('logOut', null);\n  }\n\n};\nconst mutations = {\n  setUser(state, username) {\n    state.user = username;\n  },\n\n  setFullUser(state, user) {\n    state.fullUser = user;\n  },\n\n  logOut(state) {\n    state.user = null;\n    state.projects = null;\n  },\n\n  setToken(state, token) {\n    state.token = token;\n  },\n\n  setTokenNotValid(state) {\n    state.tokenNotValid = true;\n  },\n\n  setTokenValid(state) {\n    state.tokenNotValid = false;\n  }\n\n};\nexport default {\n  state,\n  getters,\n  actions,\n  mutations\n};","map":{"version":3,"names":["axios","interceptors","response","use","error","Promise","reject","state","user","fullUser","token","tokenNotValid","projects","project","getters","isAuthenticated","StateUser","StateFullUser","StateToken","StateTokenNotValid","actions","Register","dispatch","form","post","LogIn","commit","res","status","Error","username","data","JWT","LogOut","GetUser","get","UpdateUser","put","DeleteUser","userid","delete","headers","mutations","setUser","setFullUser","logOut","setToken","setTokenNotValid","setTokenValid"],"sources":["/Users/leonardoschuster/Documents/workspace/ghibli-flix/src/store/modules/auth.js"],"sourcesContent":["import axios from 'axios'\n\naxios.interceptors.response.use(function (response) {\n    return response;\n}, function (error) {\n    return Promise.reject(error)\n})\n\nconst state = {\n    user: null,\n    fullUser: null,\n    token: null,\n    tokenNotValid: false,\n    projects: null,\n    project: null,\n};\n\nconst getters = {\n    isAuthenticated: (state) => !!state.user,\n    StateUser: (state) => state.user,\n    StateFullUser: (state) => state.fullUser,\n    StateToken: (state) => state.token,\n    StateTokenNotValid: (state) => state.tokenNotValid,\n};\n\nconst actions = {\n    async Register({dispatch}, form) {\n        await axios.post('register', form)\n        await dispatch('LogIn', form)\n    },\n    async LogIn({commit}, user) {\n        const res = await axios.post('login', user)\n        if(res.status === 404)\n            throw Error\n        await commit('setUser', user.username)\n        await commit('setToken', res.data.JWT)\n        await commit('setTokenValid')\n    },\n    async LogOut({commit}) {\n        let user = null\n        commit('logOut', user)\n    },\n    async GetUser({commit}, username) {\n        let response = await axios.get(`user/${username}`);\n        commit('setFullUser', response.data);\n    },\n    async UpdateUser({dispatch}, user) {\n        let res = await axios.put(`user/${user.username}`, user)\n        if(res.status === 404)\n            throw Error\n        await dispatch('setFullUser', res.data)\n    },\n    async DeleteUser({commit, state}, userid) {\n        await axios.delete(`user/${userid}`, {\n            headers: {\n                token: state.token\n            }\n        })\n        await commit('logOut', null)\n    },\n};\n\nconst mutations = {\n    setUser(state, username) {\n        state.user = username\n    },\n    setFullUser(state, user) {\n        state.fullUser = user\n    },\n    logOut(state) {\n        state.user = null\n        state.projects = null\n    },\n    setToken(state, token) {\n        state.token = token\n    },\n    setTokenNotValid(state) {\n        state.tokenNotValid = true\n    },\n    setTokenValid(state) {\n        state.tokenNotValid = false\n    },\n};\n\nexport default {\n    state,\n    getters,\n    actions,\n    mutations,\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}