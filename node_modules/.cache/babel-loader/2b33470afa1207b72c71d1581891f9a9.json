{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapActions, mapGetters } from 'vuex';\nexport default {\n  name: 'User',\n\n  data() {\n    return {\n      onChangeUsername: false,\n      onChangeFullName: false,\n      showError: false,\n      showPasswordUpdateSuccess: false,\n      showPasswordUpdateError: false,\n      noChangePasswordError: false,\n      passwordRepeat: '',\n      userUpdate: {\n        password: '',\n        newpassword: '',\n        username: '',\n        full_name: ''\n      }\n    };\n  },\n\n  created() {\n    this.GetUser(this.user);\n  },\n\n  watch: {\n    passwordRepeat: function (val) {\n      if (val != this.userUpdate.newpassword) {\n        this.showError = true;\n      } else {\n        this.showError = false;\n      }\n    },\n\n    password(val) {\n      if (val != this.passwordRepeat) {\n        this.showError = true;\n      } else {\n        this.showError = false;\n      }\n    }\n\n  },\n  computed: { ...mapGetters({\n      fullUser: \"StateFullUser\"\n    }),\n    ...mapGetters({\n      user: \"StateUser\"\n    }),\n    ...mapGetters({\n      fullUser: \"StateFullUser\"\n    }),\n\n    password() {\n      return this.userUpdate.newpassword;\n    }\n\n  },\n  methods: { ...mapActions(['GetUser', 'GetFullUser', 'UpdateUser', 'DeleteUser']),\n\n    navigateHome() {\n      this.$router.push('/');\n    },\n\n    async updateUser() {\n      if (this.checkPassword(this.userUpdate.newpassword)) {\n        try {\n          if (this.userUpdate.username === '' || this.userUpdate.full_name === '') {\n            this.userUpdate.username = this.fullUser.username;\n            this.userUpdate.full_name = this.fullUser.full_name;\n          }\n\n          await this.UpdateUser(this.userUpdate);\n          this.showPasswordUpdateSuccess = true;\n        } catch (error) {\n          console.log('Error accured while updating User info ' + error);\n          this.showPasswordUpdateError = true;\n        }\n      }\n    },\n\n    checkPassword(newpassword) {\n      if (newpassword === this.userUpdate.password) {\n        this.noChangePasswordError = true;\n        return false;\n      } else {\n        return true;\n      }\n    },\n\n    async deleteUser() {\n      try {\n        let userID = this.fullUser.id;\n        await this.DeleteUser(userID);\n        this.$router.push('/login');\n      } catch (error) {\n        console.log('Error accured while deleting User ' + error);\n      }\n    }\n\n  }\n};","map":{"version":3,"sources":["User.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"user\">\n        <button @click=\"navigateHome\" class=\"btn btn-primary home-btn\"><b-icon-house></b-icon-house></button>\n        <h1>Userpage</h1>\n        <div class=\"space-medium\">\n          <h3>Profile</h3>\n          <div class=\"profile\">\n            <b-form-group\n              id=\"full-name\"\n              label=\"Full name:\"\n              label-for=\"full-name\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"full-name\" v-model=\"fullUser.full_name\" placeholder=\"Full Name\"></b-form-input>\n            </b-form-group>\n            <b-form-group \n              id=\"full-name\"\n              label=\"Username:\"\n              label-for=\"username\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"username\" v-model=\"fullUser.username\" placeholder=\"Username\"></b-form-input>\n            </b-form-group>\n          </div>\n        </div>\n        <div class=\"space-medium\">\n          <h3>Change Password</h3>\n          <div class=\"profile\">\n            <b-form-group\n              id=\"current-password\"\n              label=\"Current Password\"\n              label-for=\"current-password\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"current-password\" v-model=\"userUpdate.password\" type=\"password\" placeholder=\"enter your current password\"></b-form-input>\n            </b-form-group>\n            <b-form-group\n              id=\"newpassword\"\n              label=\"New Password: \"\n              label-for=\"newpassword\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"newpassword\" v-model=\"userUpdate.newpassword\" type=\"password\" placeholder=\"enter a new password\"></b-form-input>\n            </b-form-group>\n            <b-form-group\n              id=\"confirmpassword\"\n              label=\"Confirm New Password: \"\n              label-for=\"confirmpassword\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"confirmpassword\" v-model=\"passwordRepeat\" type=\"password\" placeholder=\"enter the password again\"></b-form-input>\n            </b-form-group>\n\n\n            <!-- Alerts -->\n\n            <b-alert v-if=\"showError\" show variant=\"danger\">\n                <p class=\"alert-text\">Passwords do not match!</p>\n            </b-alert>\n\n            <b-alert v-if=\"noChangePasswordError\" show variant=\"danger\">\n                <p class=\"alert-text\">Choose a new password!</p>\n            </b-alert>\n\n            <button @click=\"updateUser()\" class=\"btn btn-primary\"><strong>Update Password</strong></button>\n\n            <b-alert show variant=\"success\" v-if=\"showPasswordUpdateSuccess\">\n              <p class=\"alert-text\">Password changed!</p>\n            </b-alert>\n            <b-alert show variant=\"danger\" v-if=\"showPasswordUpdateError\">\n              <p class=\"alert-text\"><b-icon-exclamation font-scale=\"2\"></b-icon-exclamation> Something went wrong while updating your password.</p>\n            </b-alert>\n          </div>\n        </div>\n        <div class=\"space-medium\">\n          <h3>Remove Account</h3>\n          <div class=\"profile\">\n            <button @click=\"deleteUser\" class=\"btn btn-danger\"> <b-icon-exclamation-octagon></b-icon-exclamation-octagon> <strong>Delete Account</strong></button>\n            <p class=\"button-text\">Deleting your account is irreversible!</p>\n          </div>\n        </div>\n    </div>\n</template>\n\n<script>\n import { mapActions ,mapGetters } from 'vuex'  \n\nexport default {\n  name: 'User',\n  data() {\n      return {\n        onChangeUsername: false,\n        onChangeFullName: false,\n        showError: false,\n        showPasswordUpdateSuccess: false,\n        showPasswordUpdateError: false,\n        noChangePasswordError: false,\n        passwordRepeat: '',\n        userUpdate: {\n          password: '',\n          newpassword: '',\n          username: '',\n          full_name: '',\n        },\n      }\n  },\n  created(){\n    this.GetUser(this.user);\n  },\n  watch: {\n    passwordRepeat: function (val){\n      if(val != this.userUpdate.newpassword){\n        this.showError = true;\n      }\n      else {\n        this.showError = false;\n      }\n    },\n    password(val) {\n      if(val != this.passwordRepeat){\n        this.showError = true;\n      }\n      else {\n        this.showError = false;\n      }\n    },\n  },\n  computed: {\n    ...mapGetters({fullUser: \"StateFullUser\"}),\n    ...mapGetters({user: \"StateUser\"}),\n    ...mapGetters({fullUser: \"StateFullUser\"}),\n    password() {\n      return this.userUpdate.newpassword;\n    }\n  },\n  methods: {\n    ...mapActions([\n      'GetUser', \n      'GetFullUser', \n      'UpdateUser', \n      'DeleteUser']\n      ),\n      navigateHome() {\n          this.$router.push('/');\n      },\n\n      async updateUser() {\n        if(this.checkPassword(this.userUpdate.newpassword)) {\n        try {\n          if(this.userUpdate.username === '' || this.userUpdate.full_name === '') {\n            this.userUpdate.username = this.fullUser.username;\n            this.userUpdate.full_name = this.fullUser.full_name;\n          }\n          await this.UpdateUser(this.userUpdate);\n          this.showPasswordUpdateSuccess = true;\n        } catch (error) {\n          console.log('Error accured while updating User info ' + error)\n          this.showPasswordUpdateError = true;\n        }\n        }\n      },\n\n      checkPassword(newpassword) {\n        if(newpassword === this.userUpdate.password){\n          this.noChangePasswordError = true\n          return false\n        } \n        else {\n          return true\n        }\n          \n      },\n\n      async deleteUser() {\n        try {\n          let userID = this.fullUser.id\n          await this.DeleteUser(userID);\n          this.$router.push('/login')\n        } catch (error) {\n          console.log('Error accured while deleting User ' + error)\n        }\n      },\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n  .user {\n    color: white;\n  }\n  .navbar {\n    background: black;\n    color: white;\n  }\n  a {\n    color: white !important;\n  }\n  .nav-link {\n    color: white;\n    \n    &:hover {\n      color: white;\n    }\n  }\n\n  .profile {\n    padding: 15px;\n    // background: white;\n    border-radius: 15px;\n    text-align: left;\n    margin-left: 40vw;\n    width: 20vw;\n    color: white;\n    align-content: center;\n  }\n\n  .info-field {\n    margin-bottom: 1rem;\n  }\n  .home-btn {\n    margin: 15px 2rem;\n  }\n\n  .button-text{\n    display: inline;\n    margin-left: 2rem;\n  }\n  .alert-text {\n    margin: 0;\n  }\n\n</style>\n"],"sourceRoot":"src/components/user"},"metadata":{},"sourceType":"module"}