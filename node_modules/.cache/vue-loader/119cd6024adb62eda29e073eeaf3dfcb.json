{"remainingRequest":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/leonardoschuster/Documents/workspace/art-institute-chicago/src/components/user/User.vue?vue&type=style&index=0&id=627a7762&scoped=true&lang=scss&","dependencies":[{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/src/components/user/User.vue","mtime":1635504908428},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/css-loader/dist/cjs.js","mtime":1656953083934},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1656953087670},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/postcss-loader/src/index.js","mtime":1656953084976},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/sass-loader/dist/cjs.js","mtime":1656953080799},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/cache-loader/dist/cjs.js","mtime":1656953081016},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/vue-loader/lib/index.js","mtime":1656953086040}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudXNlciB7CiAgY29sb3I6IHdoaXRlOwp9Ci5uYXZiYXIgewogIGJhY2tncm91bmQ6IGJsYWNrOwogIGNvbG9yOiB3aGl0ZTsKfQphIHsKICBjb2xvcjogd2hpdGUgIWltcG9ydGFudDsKfQoubmF2LWxpbmsgewogIGNvbG9yOiB3aGl0ZTsKICAKICAmOmhvdmVyIHsKICAgIGNvbG9yOiB3aGl0ZTsKICB9Cn0KCi5wcm9maWxlIHsKICBwYWRkaW5nOiAxNXB4OwogIC8vIGJhY2tncm91bmQ6IHdoaXRlOwogIGJvcmRlci1yYWRpdXM6IDE1cHg7CiAgdGV4dC1hbGlnbjogbGVmdDsKICBtYXJnaW4tbGVmdDogNDB2dzsKICB3aWR0aDogMjB2dzsKICBjb2xvcjogd2hpdGU7CiAgYWxpZ24tY29udGVudDogY2VudGVyOwp9CgouaW5mby1maWVsZCB7CiAgbWFyZ2luLWJvdHRvbTogMXJlbTsKfQouaG9tZS1idG4gewogIG1hcmdpbjogMTVweCAycmVtOwp9CgouYnV0dG9uLXRleHR7CiAgZGlzcGxheTogaW5saW5lOwogIG1hcmdpbi1sZWZ0OiAycmVtOwp9Ci5hbGVydC10ZXh0IHsKICBtYXJnaW46IDA7Cn0KCg=="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\n    <div class=\"user\">\n        <button @click=\"navigateHome\" class=\"btn btn-primary home-btn\"><b-icon-house></b-icon-house></button>\n        <h1>Userpage</h1>\n        <div class=\"space-medium\">\n          <h3>Profile</h3>\n          <div class=\"profile\">\n            <b-form-group\n              id=\"full-name\"\n              label=\"Full name:\"\n              label-for=\"full-name\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"full-name\" v-model=\"fullUser.full_name\" placeholder=\"Full Name\"></b-form-input>\n            </b-form-group>\n            <b-form-group \n              id=\"full-name\"\n              label=\"Username:\"\n              label-for=\"username\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"username\" v-model=\"fullUser.username\" placeholder=\"Username\"></b-form-input>\n            </b-form-group>\n          </div>\n        </div>\n        <div class=\"space-medium\">\n          <h3>Change Password</h3>\n          <div class=\"profile\">\n            <b-form-group\n              id=\"current-password\"\n              label=\"Current Password\"\n              label-for=\"current-password\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"current-password\" v-model=\"userUpdate.password\" type=\"password\" placeholder=\"enter your current password\"></b-form-input>\n            </b-form-group>\n            <b-form-group\n              id=\"newpassword\"\n              label=\"New Password: \"\n              label-for=\"newpassword\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"newpassword\" v-model=\"userUpdate.newpassword\" type=\"password\" placeholder=\"enter a new password\"></b-form-input>\n            </b-form-group>\n            <b-form-group\n              id=\"confirmpassword\"\n              label=\"Confirm New Password: \"\n              label-for=\"confirmpassword\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"confirmpassword\" v-model=\"passwordRepeat\" type=\"password\" placeholder=\"enter the password again\"></b-form-input>\n            </b-form-group>\n\n\n            <!-- Alerts -->\n\n            <b-alert v-if=\"showError\" show variant=\"danger\">\n                <p class=\"alert-text\">Passwords do not match!</p>\n            </b-alert>\n\n            <b-alert v-if=\"noChangePasswordError\" show variant=\"danger\">\n                <p class=\"alert-text\">Choose a new password!</p>\n            </b-alert>\n\n            <button @click=\"updateUser()\" class=\"btn btn-primary\"><strong>Update Password</strong></button>\n\n            <b-alert show variant=\"success\" v-if=\"showPasswordUpdateSuccess\">\n              <p class=\"alert-text\">Password changed!</p>\n            </b-alert>\n            <b-alert show variant=\"danger\" v-if=\"showPasswordUpdateError\">\n              <p class=\"alert-text\"><b-icon-exclamation font-scale=\"2\"></b-icon-exclamation> Something went wrong while updating your password.</p>\n            </b-alert>\n          </div>\n        </div>\n        <div class=\"space-medium\">\n          <h3>Remove Account</h3>\n          <div class=\"profile\">\n            <button @click=\"deleteUser\" class=\"btn btn-danger\"> <b-icon-exclamation-octagon></b-icon-exclamation-octagon> <strong>Delete Account</strong></button>\n            <p class=\"button-text\">Deleting your account is irreversible!</p>\n          </div>\n        </div>\n    </div>\n</template>\n\n<script>\n import { mapActions ,mapGetters } from 'vuex'  \n\nexport default {\n  name: 'User',\n  data() {\n      return {\n        onChangeUsername: false,\n        onChangeFullName: false,\n        showError: false,\n        showPasswordUpdateSuccess: false,\n        showPasswordUpdateError: false,\n        noChangePasswordError: false,\n        passwordRepeat: '',\n        userUpdate: {\n          password: '',\n          newpassword: '',\n          username: '',\n          full_name: '',\n        },\n      }\n  },\n  created(){\n    this.GetUser(this.user);\n  },\n  watch: {\n    passwordRepeat: function (val){\n      if(val != this.userUpdate.newpassword){\n        this.showError = true;\n      }\n      else {\n        this.showError = false;\n      }\n    },\n    password(val) {\n      if(val != this.passwordRepeat){\n        this.showError = true;\n      }\n      else {\n        this.showError = false;\n      }\n    },\n  },\n  computed: {\n    ...mapGetters({fullUser: \"StateFullUser\"}),\n    ...mapGetters({user: \"StateUser\"}),\n    ...mapGetters({fullUser: \"StateFullUser\"}),\n    password() {\n      return this.userUpdate.newpassword;\n    }\n  },\n  methods: {\n    ...mapActions([\n      'GetUser', \n      'GetFullUser', \n      'UpdateUser', \n      'DeleteUser']\n      ),\n      navigateHome() {\n          this.$router.push('/');\n      },\n\n      async updateUser() {\n        if(this.checkPassword(this.userUpdate.newpassword)) {\n        try {\n          if(this.userUpdate.username === '' || this.userUpdate.full_name === '') {\n            this.userUpdate.username = this.fullUser.username;\n            this.userUpdate.full_name = this.fullUser.full_name;\n          }\n          await this.UpdateUser(this.userUpdate);\n          this.showPasswordUpdateSuccess = true;\n        } catch (error) {\n          console.log('Error accured while updating User info ' + error)\n          this.showPasswordUpdateError = true;\n        }\n        }\n      },\n\n      checkPassword(newpassword) {\n        if(newpassword === this.userUpdate.password){\n          this.noChangePasswordError = true\n          return false\n        } \n        else {\n          return true\n        }\n          \n      },\n\n      async deleteUser() {\n        try {\n          let userID = this.fullUser.id\n          await this.DeleteUser(userID);\n          this.$router.push('/login')\n        } catch (error) {\n          console.log('Error accured while deleting User ' + error)\n        }\n      },\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n  .user {\n    color: white;\n  }\n  .navbar {\n    background: black;\n    color: white;\n  }\n  a {\n    color: white !important;\n  }\n  .nav-link {\n    color: white;\n    \n    &:hover {\n      color: white;\n    }\n  }\n\n  .profile {\n    padding: 15px;\n    // background: white;\n    border-radius: 15px;\n    text-align: left;\n    margin-left: 40vw;\n    width: 20vw;\n    color: white;\n    align-content: center;\n  }\n\n  .info-field {\n    margin-bottom: 1rem;\n  }\n  .home-btn {\n    margin: 15px 2rem;\n  }\n\n  .button-text{\n    display: inline;\n    margin-left: 2rem;\n  }\n  .alert-text {\n    margin: 0;\n  }\n\n</style>\n"]}]}