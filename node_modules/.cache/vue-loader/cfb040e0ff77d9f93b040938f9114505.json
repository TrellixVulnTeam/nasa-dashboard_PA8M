{"remainingRequest":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/leonardoschuster/Documents/workspace/art-institute-chicago/src/components/user/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/src/components/user/User.vue","mtime":1635504908428},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/cache-loader/dist/cjs.js","mtime":1656953081016},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/babel-loader/lib/index.js","mtime":1656953085082},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/cache-loader/dist/cjs.js","mtime":1656953081016},{"path":"/Users/leonardoschuster/Documents/workspace/art-institute-chicago/node_modules/vue-loader/lib/index.js","mtime":1656953086040}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiBpbXBvcnQgeyBtYXBBY3Rpb25zICxtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCcgIAoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdVc2VyJywKICBkYXRhKCkgewogICAgICByZXR1cm4gewogICAgICAgIG9uQ2hhbmdlVXNlcm5hbWU6IGZhbHNlLAogICAgICAgIG9uQ2hhbmdlRnVsbE5hbWU6IGZhbHNlLAogICAgICAgIHNob3dFcnJvcjogZmFsc2UsCiAgICAgICAgc2hvd1Bhc3N3b3JkVXBkYXRlU3VjY2VzczogZmFsc2UsCiAgICAgICAgc2hvd1Bhc3N3b3JkVXBkYXRlRXJyb3I6IGZhbHNlLAogICAgICAgIG5vQ2hhbmdlUGFzc3dvcmRFcnJvcjogZmFsc2UsCiAgICAgICAgcGFzc3dvcmRSZXBlYXQ6ICcnLAogICAgICAgIHVzZXJVcGRhdGU6IHsKICAgICAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgICAgIG5ld3Bhc3N3b3JkOiAnJywKICAgICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICAgIGZ1bGxfbmFtZTogJycsCiAgICAgICAgfSwKICAgICAgfQogIH0sCiAgY3JlYXRlZCgpewogICAgdGhpcy5HZXRVc2VyKHRoaXMudXNlcik7CiAgfSwKICB3YXRjaDogewogICAgcGFzc3dvcmRSZXBlYXQ6IGZ1bmN0aW9uICh2YWwpewogICAgICBpZih2YWwgIT0gdGhpcy51c2VyVXBkYXRlLm5ld3Bhc3N3b3JkKXsKICAgICAgICB0aGlzLnNob3dFcnJvciA9IHRydWU7CiAgICAgIH0KICAgICAgZWxzZSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIHBhc3N3b3JkKHZhbCkgewogICAgICBpZih2YWwgIT0gdGhpcy5wYXNzd29yZFJlcGVhdCl7CiAgICAgICAgdGhpcy5zaG93RXJyb3IgPSB0cnVlOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHRoaXMuc2hvd0Vycm9yID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7ZnVsbFVzZXI6ICJTdGF0ZUZ1bGxVc2VyIn0pLAogICAgLi4ubWFwR2V0dGVycyh7dXNlcjogIlN0YXRlVXNlciJ9KSwKICAgIC4uLm1hcEdldHRlcnMoe2Z1bGxVc2VyOiAiU3RhdGVGdWxsVXNlciJ9KSwKICAgIHBhc3N3b3JkKCkgewogICAgICByZXR1cm4gdGhpcy51c2VyVXBkYXRlLm5ld3Bhc3N3b3JkOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwQWN0aW9ucyhbCiAgICAgICdHZXRVc2VyJywgCiAgICAgICdHZXRGdWxsVXNlcicsIAogICAgICAnVXBkYXRlVXNlcicsIAogICAgICAnRGVsZXRlVXNlciddCiAgICAgICksCiAgICAgIG5hdmlnYXRlSG9tZSgpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgIH0sCgogICAgICBhc3luYyB1cGRhdGVVc2VyKCkgewogICAgICAgIGlmKHRoaXMuY2hlY2tQYXNzd29yZCh0aGlzLnVzZXJVcGRhdGUubmV3cGFzc3dvcmQpKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmKHRoaXMudXNlclVwZGF0ZS51c2VybmFtZSA9PT0gJycgfHwgdGhpcy51c2VyVXBkYXRlLmZ1bGxfbmFtZSA9PT0gJycpIHsKICAgICAgICAgICAgdGhpcy51c2VyVXBkYXRlLnVzZXJuYW1lID0gdGhpcy5mdWxsVXNlci51c2VybmFtZTsKICAgICAgICAgICAgdGhpcy51c2VyVXBkYXRlLmZ1bGxfbmFtZSA9IHRoaXMuZnVsbFVzZXIuZnVsbF9uYW1lOwogICAgICAgICAgfQogICAgICAgICAgYXdhaXQgdGhpcy5VcGRhdGVVc2VyKHRoaXMudXNlclVwZGF0ZSk7CiAgICAgICAgICB0aGlzLnNob3dQYXNzd29yZFVwZGF0ZVN1Y2Nlc3MgPSB0cnVlOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgYWNjdXJlZCB3aGlsZSB1cGRhdGluZyBVc2VyIGluZm8gJyArIGVycm9yKQogICAgICAgICAgdGhpcy5zaG93UGFzc3dvcmRVcGRhdGVFcnJvciA9IHRydWU7CiAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKCiAgICAgIGNoZWNrUGFzc3dvcmQobmV3cGFzc3dvcmQpIHsKICAgICAgICBpZihuZXdwYXNzd29yZCA9PT0gdGhpcy51c2VyVXBkYXRlLnBhc3N3b3JkKXsKICAgICAgICAgIHRoaXMubm9DaGFuZ2VQYXNzd29yZEVycm9yID0gdHJ1ZQogICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfSAKICAgICAgICBlbHNlIHsKICAgICAgICAgIHJldHVybiB0cnVlCiAgICAgICAgfQogICAgICAgICAgCiAgICAgIH0sCgogICAgICBhc3luYyBkZWxldGVVc2VyKCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgdXNlcklEID0gdGhpcy5mdWxsVXNlci5pZAogICAgICAgICAgYXdhaXQgdGhpcy5EZWxldGVVc2VyKHVzZXJJRCk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJykKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGFjY3VyZWQgd2hpbGUgZGVsZXRpbmcgVXNlciAnICsgZXJyb3IpCiAgICAgICAgfQogICAgICB9LAogIH0KfQo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"User.vue","sourceRoot":"src/components/user","sourcesContent":["<template>\n    <div class=\"user\">\n        <button @click=\"navigateHome\" class=\"btn btn-primary home-btn\"><b-icon-house></b-icon-house></button>\n        <h1>Userpage</h1>\n        <div class=\"space-medium\">\n          <h3>Profile</h3>\n          <div class=\"profile\">\n            <b-form-group\n              id=\"full-name\"\n              label=\"Full name:\"\n              label-for=\"full-name\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"full-name\" v-model=\"fullUser.full_name\" placeholder=\"Full Name\"></b-form-input>\n            </b-form-group>\n            <b-form-group \n              id=\"full-name\"\n              label=\"Username:\"\n              label-for=\"username\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"username\" v-model=\"fullUser.username\" placeholder=\"Username\"></b-form-input>\n            </b-form-group>\n          </div>\n        </div>\n        <div class=\"space-medium\">\n          <h3>Change Password</h3>\n          <div class=\"profile\">\n            <b-form-group\n              id=\"current-password\"\n              label=\"Current Password\"\n              label-for=\"current-password\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"current-password\" v-model=\"userUpdate.password\" type=\"password\" placeholder=\"enter your current password\"></b-form-input>\n            </b-form-group>\n            <b-form-group\n              id=\"newpassword\"\n              label=\"New Password: \"\n              label-for=\"newpassword\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"newpassword\" v-model=\"userUpdate.newpassword\" type=\"password\" placeholder=\"enter a new password\"></b-form-input>\n            </b-form-group>\n            <b-form-group\n              id=\"confirmpassword\"\n              label=\"Confirm New Password: \"\n              label-for=\"confirmpassword\"\n              class=\"info-field\"\n            >\n              <b-form-input id=\"confirmpassword\" v-model=\"passwordRepeat\" type=\"password\" placeholder=\"enter the password again\"></b-form-input>\n            </b-form-group>\n\n\n            <!-- Alerts -->\n\n            <b-alert v-if=\"showError\" show variant=\"danger\">\n                <p class=\"alert-text\">Passwords do not match!</p>\n            </b-alert>\n\n            <b-alert v-if=\"noChangePasswordError\" show variant=\"danger\">\n                <p class=\"alert-text\">Choose a new password!</p>\n            </b-alert>\n\n            <button @click=\"updateUser()\" class=\"btn btn-primary\"><strong>Update Password</strong></button>\n\n            <b-alert show variant=\"success\" v-if=\"showPasswordUpdateSuccess\">\n              <p class=\"alert-text\">Password changed!</p>\n            </b-alert>\n            <b-alert show variant=\"danger\" v-if=\"showPasswordUpdateError\">\n              <p class=\"alert-text\"><b-icon-exclamation font-scale=\"2\"></b-icon-exclamation> Something went wrong while updating your password.</p>\n            </b-alert>\n          </div>\n        </div>\n        <div class=\"space-medium\">\n          <h3>Remove Account</h3>\n          <div class=\"profile\">\n            <button @click=\"deleteUser\" class=\"btn btn-danger\"> <b-icon-exclamation-octagon></b-icon-exclamation-octagon> <strong>Delete Account</strong></button>\n            <p class=\"button-text\">Deleting your account is irreversible!</p>\n          </div>\n        </div>\n    </div>\n</template>\n\n<script>\n import { mapActions ,mapGetters } from 'vuex'  \n\nexport default {\n  name: 'User',\n  data() {\n      return {\n        onChangeUsername: false,\n        onChangeFullName: false,\n        showError: false,\n        showPasswordUpdateSuccess: false,\n        showPasswordUpdateError: false,\n        noChangePasswordError: false,\n        passwordRepeat: '',\n        userUpdate: {\n          password: '',\n          newpassword: '',\n          username: '',\n          full_name: '',\n        },\n      }\n  },\n  created(){\n    this.GetUser(this.user);\n  },\n  watch: {\n    passwordRepeat: function (val){\n      if(val != this.userUpdate.newpassword){\n        this.showError = true;\n      }\n      else {\n        this.showError = false;\n      }\n    },\n    password(val) {\n      if(val != this.passwordRepeat){\n        this.showError = true;\n      }\n      else {\n        this.showError = false;\n      }\n    },\n  },\n  computed: {\n    ...mapGetters({fullUser: \"StateFullUser\"}),\n    ...mapGetters({user: \"StateUser\"}),\n    ...mapGetters({fullUser: \"StateFullUser\"}),\n    password() {\n      return this.userUpdate.newpassword;\n    }\n  },\n  methods: {\n    ...mapActions([\n      'GetUser', \n      'GetFullUser', \n      'UpdateUser', \n      'DeleteUser']\n      ),\n      navigateHome() {\n          this.$router.push('/');\n      },\n\n      async updateUser() {\n        if(this.checkPassword(this.userUpdate.newpassword)) {\n        try {\n          if(this.userUpdate.username === '' || this.userUpdate.full_name === '') {\n            this.userUpdate.username = this.fullUser.username;\n            this.userUpdate.full_name = this.fullUser.full_name;\n          }\n          await this.UpdateUser(this.userUpdate);\n          this.showPasswordUpdateSuccess = true;\n        } catch (error) {\n          console.log('Error accured while updating User info ' + error)\n          this.showPasswordUpdateError = true;\n        }\n        }\n      },\n\n      checkPassword(newpassword) {\n        if(newpassword === this.userUpdate.password){\n          this.noChangePasswordError = true\n          return false\n        } \n        else {\n          return true\n        }\n          \n      },\n\n      async deleteUser() {\n        try {\n          let userID = this.fullUser.id\n          await this.DeleteUser(userID);\n          this.$router.push('/login')\n        } catch (error) {\n          console.log('Error accured while deleting User ' + error)\n        }\n      },\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n  .user {\n    color: white;\n  }\n  .navbar {\n    background: black;\n    color: white;\n  }\n  a {\n    color: white !important;\n  }\n  .nav-link {\n    color: white;\n    \n    &:hover {\n      color: white;\n    }\n  }\n\n  .profile {\n    padding: 15px;\n    // background: white;\n    border-radius: 15px;\n    text-align: left;\n    margin-left: 40vw;\n    width: 20vw;\n    color: white;\n    align-content: center;\n  }\n\n  .info-field {\n    margin-bottom: 1rem;\n  }\n  .home-btn {\n    margin: 15px 2rem;\n  }\n\n  .button-text{\n    display: inline;\n    margin-left: 2rem;\n  }\n  .alert-text {\n    margin: 0;\n  }\n\n</style>\n"]}]}